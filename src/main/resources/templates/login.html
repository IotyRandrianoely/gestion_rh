<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>Connexion â€” Gestion RH</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#f5f7fa; --text:#2c3e50; --sub:#4b5a6a;
      --card:#ffffff; --line:#e6ecf2;
      --primary:#3498db; --primary-d:#2980b9;
      --accent:#2ecc71; --accent-d:#27ae60;
      --danger:#e74c3c; --danger-d:#c0392b;
      --muted:#8aa0b2;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    body{
      font-family:'Segoe UI',Arial,sans-serif; color:var(--text);
      background:var(--bg); min-height:100vh; display:grid; place-items:center; padding:20px;
    }

    /* Wrapper 2 colonnes (image + panneau) */
    .auth-wrap{
      width:100%; max-width:1000px; min-height:560px;
      background:var(--card); border:1px solid var(--line); border-radius:18px;
      overflow:hidden; box-shadow:0 12px 28px rgba(0,0,0,.12);
      display:grid; grid-template-columns:1.1fr .9fr;
    }
    @media(max-width:940px){ .auth-wrap{ grid-template-columns:1fr } }

    /* Colonne image */
    .auth-image{
      position:relative; background:#dfe9f3;
      background-image:url('/images/banner.jpg');
      background-size:cover; background-position:center; min-height:280px;
    }
    .auth-image::after{
      content:""; position:absolute; inset:0;
      background:linear-gradient(135deg, rgba(0,0,0,.20), rgba(52,152,219,.25));
    }
    .image-caption{
      position:absolute; left:20px; right:20px; bottom:20px; z-index:1;
      background:rgba(255,255,255,.9); border:1px solid var(--line); backdrop-filter: blur(3px);
      border-radius:14px; padding:14px 16px; box-shadow:0 4px 10px rgba(0,0,0,.08);
    }
    .caption-title{ font-weight:900; font-size:18px; margin-bottom:6px; color:#1f3347 }
    .caption-text{ color:var(--sub); font-size:13px }

    /* Colonne formulaire */
    .auth-panel{ padding:28px 26px 24px; display:flex; flex-direction:column; gap:16px }
    .brand{
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .brand h1{ font-size:22px; letter-spacing:.2px }
    .badge{
      background:#eef6ff; color:#1d6fdc; border:1px solid #d7e7ff;
      padding:6px 10px; border-radius:999px; font-weight:800; font-size:12px;
    }
    .sub{ color:var(--muted); font-size:13px; margin-top:-4px }

    .card{
      background:var(--card); border:1px solid var(--line); border-radius:14px; padding:18px;
      box-shadow:0 6px 16px rgba(0,0,0,.06);
    }

    /* Tabs rÃ´le */
    .role-tabs{ display:flex; gap:8px; flex-wrap:wrap; margin-bottom:10px }
    .role-tab{
      padding:10px 12px; border:1px solid var(--line); border-radius:12px; cursor:pointer;
      background:#fff; color:#41607a; font-weight:800; font-size:13px;
      transition:background .2s, border-color .2s;
    }
    .role-tab.active{ background:#3498db; color:#fff; border-color:#3498db }
    .role-hint{ font-size:12px; color:var(--sub); margin-top:-6px; margin-bottom:8px }

    .form-group{ display:flex; flex-direction:column; gap:8px; margin-bottom:12px }
    label{ font-weight:800; color:#243447; font-size:14px }
    input[type="text"], input[type="password"]{
      width:100%; padding:12px; border:1px solid #d7dde5; border-radius:10px; font-size:14px; background:#fff;
      transition:border-color .2s, box-shadow .2s;
    }
    input:focus{ border-color:#8ac4fb; box-shadow:0 0 0 4px rgba(52,152,219,.15); outline:none }

    .btn-login{
      width:100%; padding:12px 16px; border-radius:12px; font-weight:900; letter-spacing:.2px;
      border:1px solid transparent; color:#fff; background:var(--accent);
      transition:transform .15s, box-shadow .15s, background .15s; cursor:pointer;
    }
    .btn-login:hover{ background:var(--accent-d); transform:translateY(-1px); box-shadow:0 8px 16px rgba(46,204,113,.2) }

    /* Alerts */
    .alert{ padding:12px; border-radius:10px; border:1px solid; text-align:center; margin-bottom:10px; font-size:14px }
    .alert-error{ background:#fdecea; color:#a12622; border-color:#f3c3c0 }
    .alert-success{ background:#eafaf1; color:#1b7f45; border-color:#c9eedc }

    /* Comptes de dÃ©mo */
    .demo{
      margin-top:8px; background:#f8fbff; border:1px dashed #cfe2f7; border-radius:14px; padding:14px;
    }
    .demo h4{ margin-bottom:8px; color:#1d6fdc; font-size:14px }
    .demo-grid{ display:grid; grid-template-columns:1fr; gap:8px }
    .demo-item{
      display:flex; justify-content:space-between; align-items:center; gap:8px;
      padding:10px 12px; background:#fff; border:1px solid var(--line); border-radius:10px;
      cursor:pointer; transition:background .2s, border-color .2s;
    }
    .demo-item:hover{ background:#f3f8ff; border-color:#b7d5f6 }
    .demo-item strong{ color:#243447 }

    .foot{ text-align:center; color:var(--sub); font-size:12px; margin-top:6px }
    .link{ color:var(--primary); text-decoration:none }
    .link:hover{ color:var(--primary-d) }
  </style>
</head>
<body>

  <div class="auth-wrap">
    <!-- Colonne image -->
    <div class="auth-image">
      <div class="image-caption">
        <div class="caption-title">Bienvenue sur Gestion RH</div>
        <div class="caption-text">Choisissez votre espace (Client, RH ou Admin) puis connectez-vous.</div>
      </div>
    </div>

    <!-- Colonne formulaire -->
    <div class="auth-panel">
      <div class="brand">
        <h1>Connexion</h1>
        <span class="badge" id="roleBadge">Client</span>
      </div>
      <div class="sub">AccÃ©dez Ã  votre espace sÃ©curisÃ©.</div>

      <!-- Messages -->
      <div th:if="${error}" class="alert alert-error" th:text="${error}"></div>
      <div th:if="${param.logout}" class="alert alert-success">Vous avez Ã©tÃ© dÃ©connectÃ© avec succÃ¨s</div>

      <div class="card">
        <!-- Tabs de choix de rÃ´le -->
        <div class="role-tabs" role="tablist" aria-label="Choix du rÃ´le">
          <button type="button" class="role-tab active" data-role="client"  onclick="switchRole('client', this)">ðŸ‘¤ Client</button>
          <button type="button" class="role-tab"        data-role="rh"      onclick="switchRole('rh', this)">ðŸ‘¥ RH</button>
          <button type="button" class="role-tab"        data-role="admin"   onclick="switchRole('admin', this)">ðŸ‘‘ Admin</button>
        </div>
        <div class="role-hint" id="roleHint">Espace candidat pour consulter les offres et suivre vos candidatures.</div>

        <!-- Formulaire -->
        <form th:action="@{/login}" method="post" id="loginForm">
          <!-- Champ facultatif : le back peut lâ€™ignorer sans souci -->
          <input type="hidden" name="role" id="roleInput" value="client" />

          <div class="form-group">
            <label for="username">Nom d'utilisateur</label>
            <input type="text" id="username" name="username" placeholder="Entrez votre identifiant" required />
          </div>

          <div class="form-group">
            <label for="password">Mot de passe</label>
            <input type="password" id="password" name="password" placeholder="Votre mot de passe" required />
          </div>

          <button type="submit" class="btn-login">Se connecter</button>
        </form>
      </div>

      <!-- Comptes de dÃ©mo -->
      <div class="demo">
        <h4>ðŸ“‹ Comptes de test</h4>
        <div class="demo-grid">
          <div class="demo-item" onclick="quickFill('client','client1','client123')">
            <div><strong>ðŸ‘¤ Client</strong> â€” client1 / client123</div><div>Remplir</div>
          </div>
          <div class="demo-item" onclick="quickFill('rh','rh1','rh123')">
            <div><strong>ðŸ‘¥ RH</strong> â€” rh1 / rh123</div><div>Remplir</div>
          </div>
          <div class="demo-item" onclick="quickFill('admin','admin1','admin123')">
            <div><strong>ðŸ‘‘ Admin</strong> â€” admin1 / admin123</div><div>Remplir</div>
          </div>
        </div>
      </div>

      <div class="foot">
        Besoin dâ€™aide ? <a href="#" class="link">Contacter le support</a> Â· <a class="link" th:href="@{/annonces}">Voir les annonces</a>
      </div>
    </div>
  </div>

  <script>
    // Focus auto
    document.getElementById('username').focus();

    function switchRole(role, el){
      // UI tabs
      document.querySelectorAll('.role-tab').forEach(t => t.classList.remove('active'));
      el.classList.add('active');

      // Badge + hint + hidden role
      document.getElementById('roleInput').value = role;
      const badge = document.getElementById('roleBadge');
      const hint  = document.getElementById('roleHint');

      if(role === 'client'){
        badge.textContent = 'Client';
        hint.textContent  = "Espace candidat pour consulter les offres et suivre vos candidatures.";
      }else if(role === 'rh'){
        badge.textContent = 'RH';
        hint.textContent  = "Espace Ressources Humaines â€” gestion des candidatures et prÃ©-sÃ©lections.";
      }else{
        badge.textContent = 'Admin';
        hint.textContent  = "AccÃ¨s complet Ã  la gestion des annonces, postes et utilisateurs.";
      }

      // Placeholders orientÃ©s (facultatif, n'affecte pas le back)
      const u = document.getElementById('username');
      u.placeholder = (role === 'admin') ? "Ex : admin1" : (role === 'rh' ? "Ex : rh1" : "Ex : client1");
      u.focus();
    }

    function quickFill(role, username, password){
      switchRole(role, document.querySelector('.role-tab[data-role="'+role+'"]') || document.querySelector('.role-tab.active'));
      document.getElementById('username').value = username;
      document.getElementById('password').value = password;
      document.getElementById('username').focus();
    }

    // Soumission avec Enter
    document.addEventListener('keydown', function(e){
      if(e.key === 'Enter' && (e.target.tagName === 'INPUT' || e.target.tagName === 'BUTTON')){
        document.getElementById('loginForm').submit();
      }
    });
  </script>
</body>
</html>
