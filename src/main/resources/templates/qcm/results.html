<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <title>R√©sultats QCM</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    *{margin:0;padding:0;box-sizing:border-box}

    :root{
      --bg:#f5f7fa; --text:#2c3e50; --muted:#6c7a89; --sub:#4b5a6a;
      --card:#ffffff; --line:#e6ecf2;
      --primary:#3498db; --primary-d:#2980b9;
      --success:#2ecc71; --success-d:#27ae60;
      --warn:#f1c40f; --danger:#e74c3c;
      --ink:#243447;
    }

    body{
      font-family:'Segoe UI', Arial, sans-serif;
      line-height:1.6; background:var(--bg); color:var(--text);
    }

    /* ===== HERO ===== */
    .hero{
      width:100%; height:280px;
      background:linear-gradient(to bottom, rgba(0,0,0,.35), rgba(0,0,0,.35)),
                 url('/images/banner.jpg') center/cover no-repeat;
      display:flex; align-items:center; justify-content:center;
      text-align:center; color:#fff; text-shadow:0 3px 12px rgba(0,0,0,.45);
      padding:0 16px;
    }
    .hero h1{ font-size:36px; font-weight:700 }
    .hero p{ margin-top:10px; font-size:15px; opacity:.95 }

    /* ===== NAV ===== */
    nav{
      background:#1f2b38;
      display:flex; justify-content:center; gap:36px; padding:14px 16px;
    }
    nav a{
      color:#ecf0f1; text-decoration:none; font-weight:500;
      padding:6px 8px; border-radius:6px; transition:background .25s, color .25s;
    }
    nav a:hover{ background:#2b3b4f; color:#1abc9c }

    /* ===== LAYOUT ===== */
    .container{ max-width:1100px; margin:32px auto; padding:0 20px }
    .title{ text-align:center; margin-bottom:18px }
    .title h2{
      display:inline-block; padding-bottom:6px; border-bottom:2px solid var(--primary); font-size:26px;
    }
    .subtitle{ text-align:center; color:var(--sub); font-size:14px; margin:8px 0 22px }

    /* ===== CARDS ===== */
    .card{
      background:var(--card); border:1px solid var(--line); border-radius:12px;
      box-shadow:0 6px 16px rgba(0,0,0,.06); padding:18px;
    }
    .stack{ display:grid; gap:18px }

    /* R√©sum√© */
    .summary{ display:grid; gap:14px }
    .score-line{ display:flex; gap:14px; flex-wrap:wrap; align-items:center }
    .pill{
      display:inline-block; padding:8px 12px; border-radius:999px; font-weight:800; font-size:13px;
      background:#eef6ff; color:#1d6fdc; border:1px solid #d7e7ff;
    }
    .pill.success{ background:#eaf9f0; color:#1c9d57; border-color:#c8eed8 }
    .pill.warn{ background:#fff6d7; color:#7c6500; border-color:#ffeaa7 }

    .alert{
      padding:12px 14px; border-radius:10px; border:1px solid;
      font-weight:700;
    }
    .alert-success{ background:#eafaf1; color:#1b7f45; border-color:#c9eedc }
    .alert-warning{ background:#fff8e6; color:#856404; border-color:#ffeaa7 }

    /* D√©tail questions */
    .q-card{ display:grid; gap:10px }
    .q-title{ color:var(--primary-d); font-weight:800; font-size:16px }
    .list{ margin-left:18px }
    .list li{ margin:4px 0 }

    .correct{ color:var(--success-d); font-weight:700 }
    .incorrect{ color:var(--danger); text-decoration:line-through }
    .time{ color:var(--muted); font-size:13px }

    /* Boutons */
    .actions{ margin-top:18px; display:flex; gap:12px; justify-content:center; flex-wrap:wrap }
    .btn{
      display:inline-block; text-decoration:none; font-weight:800; font-size:14px;
      padding:10px 14px; border-radius:10px; transition:background .2s, transform .2s, box-shadow .2s;
      background:var(--primary); color:#fff;
    }
    .btn:hover{ background:var(--primary-d); transform:translateY(-1px); box-shadow:0 8px 16px rgba(41,128,185,.2) }

    /* ===== CONTACT / FOOTER ===== */
    #contact{ background:#1f2b38; color:#e1e7ee; padding:48px 20px; margin-top:60px }
    #contact h3{ font-size:22px; margin-bottom:20px; text-align:center }
    .contact-grid{
      max-width:1000px; margin:auto; display:grid; gap:20px; grid-template-columns:repeat(3,1fr);
    }
    @media(max-width:900px){ .contact-grid{ grid-template-columns:1fr } }
    .contact-card{ background:#263545; border-radius:12px; padding:16px; text-align:center }
    .contact-card b{ display:block; color:#fff; margin-bottom:8px }
    .contact-card span{ color:#cfe0f5 }

    footer{ text-align:center; padding:18px; color:#7f8c8d; background:#f0f3f6 }
  </style>
</head>
<body>

  <!-- HERO -->
  <section class="hero">
    <div>
      <h1>R√©sultats de votre QCM</h1>
      <p>Analyse de vos r√©ponses et corrections officielles.</p>
    </div>
  </section>

  <!-- NAV -->
  <nav>
    <a th:href="@{/annonces}">Annonces</a>
    <a th:href="@{/qcm/questions}">QCM</a>
    <a href="#contact">Contact</a>
  </nav>

  <!-- CONTENU -->
  <main class="container stack">
    <div class="title"><h2>R√©capitulatif</h2></div>

    <!-- R√©sum√© Score -->
    <section class="card summary">
      <div class="score-line">
        <span class="pill">
          Score :
          <b style="margin-left:6px" th:text="${result.score}">0</b>
          <span style="margin:0 4px">/</span>
          <span>10</span>
        </span>

        <span class="pill"
              th:classappend="${result.percentage >= 50} ? ' success' : ' warn'">
          Taux de r√©ussite :
          <b style="margin-left:6px" th:text="${#numbers.formatDecimal(result.percentage,1,2)}">0</b>%
        </span>
      </div>

      <div class="alert"
           th:classappend="${result.percentage >= 50} ? ' alert-success' : ' alert-warning'">
        <span th:text="${result.percentage >= 50 ? 'F√©licitations ! Vous avez r√©ussi l‚Äôexamen.' : 'Continuez vos efforts : r√©visez et r√©essayez.'}">
          Message
        </span>
      </div>
    </section>

    <!-- D√©tail par question -->
    <div class="title" style="margin-top:4px;"><h2>D√©tail des questions</h2></div>

    <section th:each="answer : ${answers}" class="card q-card">
      <h3 class="q-title" th:text="${answer.question.text}">Question</h3>

      <div>
        <strong>Vos r√©ponses :</strong>
        <ul class="list">
          <li th:each="option : ${answer.selectedOptions}"
              th:text="${option.text}"
              th:class="${option.correct} ? 'correct' : 'incorrect'">Option</li>
        </ul>
      </div>

      <div>
        <strong>R√©ponses correctes :</strong>
        <ul class="list">
          <li th:each="option : ${answer.correctOptions}"
              th:text="${option.text}"
              class="correct">Option</li>
        </ul>
      </div>

      <div class="time">
        Temps utilis√© :
        <span th:text="${answer.timeSpent} + ' secondes'">0 secondes</span>
      </div>
    </section>

    <!-- Actions -->
    <div class="actions">
      <a class="btn" th:href="@{/qcm/questions}">‚Üê Retour √† la liste des questions</a>
    </div>
  </main>

  <!-- CONTACT -->
  <section id="contact">
    <h3>Contact</h3>
    <div class="contact-grid">
      <div class="contact-card"><b>üìß Email</b><span>contact@entreprise-rh.com</span></div>
      <div class="contact-card"><b>‚òéÔ∏è T√©l√©phone</b><span>+261 34 00 000 00</span></div>
      <div class="contact-card"><b>üìç Adresse</b><span>Antananarivo, Madagascar</span></div>
    </div>
  </section>

  <footer>¬© 2025 Entreprise de Recrutement RH ‚Äî Tous droits r√©serv√©s.</footer>

</body>
</html>
